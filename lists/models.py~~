from django.db import models
from components.models import Component, Editable

class Project(Editable):
	ENV_CHOICE			= (
					('GB','Ground, Benign'),
					('GF','Ground, Fixed'),
					('GM','Ground, Mobile'),
					('NS','Naval, Sheltered'),
					('NU','Naval, Unsheltered'),
					('AIC','Airborne, Inhabited, Cargo'),
					('AIF','Airborne, Inhabited, Fighter'),
					('AUC','Airborne, Uninhabited, Cargo'),
					('AUF','Airborne, Uninhabited, Fighter'),
					('ARW','Airborne, Rotary Winged'),
					('SF','Space Flight'),
					('MF','Missle, Flight'),
					('ML','Missle, Launch'),
					('CL','Cannon, Launch'),
				)
	name				= models.CharField(max_length=64)
	acronym				= models.CharField(max_length=16)
	environment			= models.CharField(max_length=3,choice=ENV_CHOICE)
	customer			= models.CharField(max_length=64)
	end_user			= models.CharField(max_length=64)
	start_date			= models.DateField()
	end_date			= models.DateField()

class Board(Editable):
	name				= models.CharField(max_length=32)
	model				= models.ForeignKey(Model)
	width				= models.FloatField(null=True,blank=True)
	length				= models.FloatField(null=True,blank=True)
	thickness			= models.FloatField(null=True,blank=True)
	material			= models.CharField(null=True,blank=True,max_length=8)
	layers				= models.IntegerField(null=True,blank=True)
	components			= models.ManyToManyField(DeclaredComponentList,through='BOMComponent')
	

class Model(Editable):
	stage				= models.CharField(max_length=8,null=True,blank=True)
	project				= models.ForeignKey(Project)
	name				= models.CharField(max_length=32)
	
class BOMComponent(Editable):
	board				= models.ForeignKey(Board)
	designator			= models.CharField(max_length = 8)
	component			= models.ForeignKey(DeclaredComponentList)

class DeclaredComponentList(Editable)
	component			= models.ForeignKey(Component)
	running_number		= models.CharField(max_length=32,unique=True)

	
